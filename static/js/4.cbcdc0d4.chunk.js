(this["webpackJsonpjrgcast-desafio-sharenergy-front-end"]=this["webpackJsonpjrgcast-desafio-sharenergy-front-end"]||[]).push([[4],{160:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(91),c=n.n(r),i=n(94),o=n(16),s=n(98),u=n(20),l=n(87),j=n(156),d=n(1);n(108).config();var m={methods:"GET,PUT,POST,DELETE",mode:"cors",headers:{"Access-Control-Allow-Origin":"*"}},b=function(){var e=Object(i.a)(c.a.mark((function e(t){var n,a,r,i=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:m,e.prev=1,e.next=4,fetch(t,n);case 4:return a=e.sent,e.next=7,a.json();case 7:return r=e.sent,e.abrupt("return",r);case 11:return e.prev=11,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",JSON.stringify(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),p=n(161),O=n(163),f=n(166),h=n(159),v=n(154),x=n(3),g=function(e){var t=e.page,n=e.showPercentage,a=e.showUsinData,r=e.functionsObj,c=e.selectValue,i=r.fillCDataObj,o=r.fillUsinaObj,s=r.handleSubmitClient;return Object(x.jsxs)(p.a,{component:"form",noValidate:!0,autoComplete:"off",sx:{display:"flex",flexDirection:"column",width:"50%",margin:"0 auto"},children:[Object(x.jsx)(O.a,{id:"input-name",label:"Nome do Cliente",name:"nomeCliente",type:"text",variant:"filled",onChange:function(e){return i(e)},InputLabelProps:{shrink:!0},style:{marginBottom:"1em"}}),a?Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(f.a,{id:"label-select-usina-id",children:["Usina ID",Object(x.jsx)(h.a,{id:"select-usina-id",labelid:"label-select-usina-id",label:"Usina ID",name:"usinaId",variant:"outlined",onChange:function(e){return o(e)},defaultValue:1,value:c,style:{marginBottom:"1em"},children:Object(x.jsx)(v.a,{value:1,children:"1"})})]})}):"",n?Object(x.jsxs)(x.Fragment,{children:[" ",Object(x.jsx)(f.a,{id:"input-porcentagem",children:"Percentual de participa\xe7\xe3o"}),Object(x.jsx)(O.a,{labelid:"input-porcentagem",name:"percentualDeParticipacao",defaultValue:1,type:"number",InputProps:{inputProps:{inputMode:"numeric",pattern:"[0-9]*",min:"0",max:"20",step:"1",defaultValue:"20"}},step:1,min:0,max:20,onChange:function(e){return o(e)},style:{margin:"1em auto",width:"10%"}})]}):"",Object(x.jsxs)(j.a,{id:"submit-client",variant:"contained",color:"primary",onClick:s,style:{width:"40%",margin:"0 auto"},children:[" ",t," Cliente"]})]})},C=function(e){var t=e.method,n=e.url,a=e.showPercentage,r=e.showUsinData,m=e.page,p=e.pageAction,O=Object(d.useState)({nomeCliente:"",numeroCliente:99,usinas:[]}),f=Object(u.a)(O,2),h=f[0],v=f[1],C=Object(d.useState)({usinaId:1,percentualDeParticipacao:10}),y=Object(u.a)(C,2),w=y[0],P=y[1],k=Object(d.useState)(""),I=Object(u.a)(k,2),S=I[0],D=I[1],N=Object(d.useState)(!1),U=Object(u.a)(N,2),V=U[0],E=U[1],F=Object(d.useState)(!1),T=Object(u.a)(F,2),A=T[0],K=T[1],M={method:t,mode:"cors",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({clientData:{nomeCliente:h.nomeCliente,numeroCliente:h.numeroCliente,usinas:[w]}})},B=function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,b(n,M);case 3:t=e.sent,D(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(d.useEffect)((function(){""!==S&&(E(!1),K(!0))}),[S]),Object(d.useEffect)((function(){console.log(V)}),[V]);var L={fillCDataObj:function(e){var t=e.target,n=t.name,a=t.value;v(Object(s.a)(Object(s.a)({},h),{},Object(o.a)({},n,a))),console.log(h)},fillUsinaObj:function(e){var t=e.target,n=t.name,a=t.value;P(Object(s.a)(Object(s.a)({},w),{},Object(o.a)({},n,Number(a)))),console.log(w)},handleSubmitClient:B};return Object(x.jsxs)("main",{children:[Object(x.jsxs)("h1",{children:[m," Cliente"]}),Object(x.jsx)(g,{functionsObj:L,selectValue:w.usinaId,page:m,showPercentage:a,showUsinData:r}),Object(x.jsxs)("section",{children:[V?Object(x.jsx)(l.a,{style:{margin:"1em auto",width:"50%"}}):"",A?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("p",{children:[" Cliente ",p," com sucesso!"]}),Object(x.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){D(""),K(!1)},style:{width:"40%",margin:"0 auto"},children:"Outro?"})]}):""]})]})};n(108).config();var y="https://desafio-sharenergy-back-end.herokuapp.com/clients",w=("".concat(y,"/byname"),"".concat(y,"/newclient")),P="".concat(y,"/updateclient"),k="".concat(y,"/deleteclient"),I="https://desafio-sharenergy-back-end.herokuapp.com/company",S="".concat(I,"/intervals"),D="".concat(I,"/datareadabletime"),N=function(){return Object(x.jsx)(C,{method:"POST",url:w,showPercentage:!0,showUsinData:!0,page:"Adicionar",pageAction:"adicionado/a"})},U=function(){return Object(x.jsx)(C,{method:"DELETE",url:k,showPercentage:!1,showUsinData:!1,page:"Deletar",pageAction:"deletado/a"})},V=n(129),E=n(71),F=function(e){var t=e.currField,n=void 0===t?"Campo":t,a=e.currFValue,r=[{argument:n,value:void 0===a?0:a}];return Object(x.jsx)(E.a,{children:Object(x.jsxs)(V.c,{data:r,children:[Object(x.jsx)(V.a,{}),Object(x.jsx)(V.d,{}),Object(x.jsx)(V.b,{valueField:"value",argumentField:"argument",barWidth:.3})]})})},T=n(157),A=function(e){var t=e.currentTarget;return console.log(t.value,t.name)},K=function(e){var t=e.valuesObj,n=e.onClickFunc,a=void 0===n?A:n;console.log(t);return Object(x.jsx)(T.a,{color:"primary",variant:"outlined","aria-label":"outlined primary button group",children:Object.entries(t).map((function(e,t){var n=Object(u.a)(e,2),r=n[0],c=n[1];return console.log(r,c),Object(x.jsx)(j.a,{name:r,value:c,onClick:a,children:r},r)}))})},M=function(){var e=Object(d.useState)({}),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(d.useState)(!1),l=Object(u.a)(r,2),m=l[0],p=l[1],f=Object(d.useState)(""),h=Object(u.a)(f,2),v=h[0],g=h[1],C=Object(d.useState)(!1),y=Object(u.a)(C,2),w=y[0],P=y[1],k=Object(d.useState)({}),I=Object(u.a)(k,2),S=I[0],N=I[1],U=Object(d.useState)({field:"Campo",value:0}),V=Object(u.a)(U,2),E=V[0],T=V[1],A=Object(d.useState)({hour:5,minutes:20}),M=Object(u.a)(A,2),B=M[0],L=M[1],_={inputPropsHour:{inputMode:"numeric",pattern:"[0-9]*",min:"5",max:"17",defaultValue:"5"},inputPropsMinutes:{inputMode:"numeric",pattern:"[0-9]*",min:"00",max:"55",step:"5",defaultValue:"20"}};Object(d.useEffect)((function(){var e=function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(D);case 2:(t=e.sent).hasOwnProperty("modifiedData")&&(a(t),p(!0));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(d.useEffect)((function(){if(w){var e=v[0],t=e.tensao_V,n=e.corrente_A,a=e.potencia_kW,r=e.temperatura_C;N({"Tens\xe3o(V)":t,"Corrente(A)":n,"Pot\xeancia(kW)":a,"Temperatura(C)":r})}}),[w,v]);var W=function(e){var t=e.target,n=t.name,a=t.value;Number(a)<10&&(a="0".concat(a)),L(Object(s.a)(Object(s.a)({},B),{},Object(o.a)({},n,a))),console.log(B)},J=function(){var e=Object(i.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(B.hour,"h").concat(B.minutes,"min"),e.next=3,n.modifiedData.filter((function(e){return e.tempo_humano===t}));case 3:a=e.sent,g(a),P(!0),T({field:"Campo",value:0});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(d.useEffect)((function(){var e=document.getElementById("input-minutes");B.hour<6?(!function(){var e=document.getElementById("input-hours"),t=document.getElementById("input-minutes");e.value<6&&t.value<20&&(t.value=20)}(),e.min=20,B.minutes<20&&(B.minutes=20)):e.min=0}));return Object(x.jsx)("main",{children:Object(x.jsxs)("section",{children:[Object(x.jsx)(O.a,{id:"input-hours",label:"Hora",name:"hour",type:"number",inputProps:_.inputPropsHour,onChange:function(e){return W(e)},InputLabelProps:{shrink:!0}}),Object(x.jsx)(O.a,{id:"input-minutes",label:"Minutos",name:"minutes",type:"number",inputProps:_.inputPropsMinutes,onChange:function(e){return W(e)},InputLabelProps:{shrink:!0}}),Object(x.jsx)(j.a,{id:"search-data",variant:"contained",disabled:!m,color:"primary",onClick:J,children:"Buscar dados"}),Object(x.jsx)("div",{style:{marginTop:"0.5em"},children:w?Object(x.jsx)(K,{valuesObj:S,onClickFunc:function(e){var t=e.currentTarget;T({field:t.name,value:Number(t.value)})}}):""}),Object(x.jsx)(F,{currField:E.field,currFValue:E.value})]})})},B=function(){return Object(x.jsx)(M,{})},L=n(28),_=function(){var e=Object(d.useContext)(L.a),t=e.currClientName,n=e.setCurrClientName;return Object(x.jsxs)("div",{children:[Object(x.jsxs)("h1",{children:["Bem-vindo/a ",t]}),Object(x.jsx)(O.a,{label:"Como quer ser chamado/a?",type:"text",onChange:function(e){var t=e.target;return n(t.value)},style:{margin:"1em auto"}})]})},W=function(e){var t=e.functionsObj,n=e.selectValue,a=t.fillClientOldName,r=t.fillClientNewName,c=t.fillUsinaObj,i=t.handleSubmitClient;return Object(x.jsxs)(p.a,{component:"form",noValidate:!0,autoComplete:"off",sx:{display:"flex",flexDirection:"column",width:"50%",margin:"0 auto"},children:[Object(x.jsx)(O.a,{id:"input-name",label:"Nome do Cliente",name:"nomeCliente",type:"text",defaultValue:"Maria Coelho",variant:"filled",onChange:function(e){return a(e)},InputLabelProps:{shrink:!0},style:{marginBottom:"1em"}}),Object(x.jsx)(O.a,{id:"input-newname",label:"Novo nome do Cliente",name:"novoNome",type:"text",variant:"filled",onChange:function(e){return r(e)},InputLabelProps:{shrink:!0},style:{marginBottom:"1em"}}),Object(x.jsxs)(f.a,{id:"label-select-usina-id",children:["Usina ID",Object(x.jsx)(h.a,{id:"select-usina-id",labelid:"label-select-usina-id",label:"Usina ID",name:"usinaId",variant:"outlined",onChange:function(e){return c(e)},defaultValue:1,value:n,style:{marginBottom:"1em"},children:Object(x.jsx)(v.a,{value:1,children:"1"})})]}),Object(x.jsx)(f.a,{id:"input-porcentagem",children:"Percentual de participa\xe7\xe3o"}),Object(x.jsx)(O.a,{labelid:"input-porcentagem",name:"percentualDeParticipacao",defaultValue:1,type:"number",InputProps:{inputProps:{inputMode:"numeric",pattern:"[0-9]*",min:"0",max:"20",step:"1",defaultValue:"20"}},step:1,min:0,max:20,onChange:function(e){return c(e)},style:{margin:"1em auto",width:"10%"}}),Object(x.jsx)(j.a,{id:"submit-client",variant:"contained",color:"primary",onClick:i,style:{width:"40%",margin:"0 auto"},children:" Modificar Cliente"})]})},J=function(){var e=Object(d.useState)({nomeCliente:""}),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(d.useState)({novoNome:"",novasUsinas:[]}),m=Object(u.a)(r,2),p=m[0],O=m[1],f=Object(d.useState)({usinaId:1,percentualDeParticipacao:0}),h=Object(u.a)(f,2),v=h[0],g=h[1],C=Object(d.useState)(""),y=Object(u.a)(C,2),w=y[0],k=y[1],I=Object(d.useState)(!1),S=Object(u.a)(I,2),D=S[0],N=S[1],U=Object(d.useState)(!1),V=Object(u.a)(U,2),E=V[0],F=V[1],T=p.novasUsinas.length>0?{clientData:n,updateData:p}:{clientData:n,updateData:{novoNome:p.novoNome,novasUsinas:void 0}},A={method:"PUT",mode:"cors",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify(T)},K=function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(p.novasUsinas.length>0,T),N(!0),e.next=4,b(P,A);case 4:t=e.sent,k(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(d.useEffect)((function(){""!==w&&(N(!1),F(!0)),console.log(w)}),[w]),Object(d.useEffect)((function(){console.log(D)}),[D]);var M={fillClientOldName:function(e){var t=e.target,r=t.name,c=t.value;a(Object(s.a)(Object(s.a)({},n),{},Object(o.a)({},r,c))),console.log(n)},fillClientNewName:function(e){var t=e.target,n=t.name,a=t.value;O(Object(s.a)(Object(s.a)({},p),{},Object(o.a)({},n,a))),console.log(p)},fillUsinaObj:function(e){var t=e.target,n=t.name,a=t.value;g(Object(s.a)(Object(s.a)({},v),{},Object(o.a)({},n,Number(a)))),O(Object(s.a)(Object(s.a)({},p),{},{novasUsinas:[v]}))},handleSubmitClient:K};return Object(x.jsxs)("main",{children:[Object(x.jsx)("h1",{children:"Modificar Cliente"}),Object(x.jsx)(W,{functionsObj:M,selectValue:v.usinaId}),Object(x.jsxs)("section",{children:[D?Object(x.jsx)(l.a,{style:{margin:"1em auto",width:"50%"}}):"",E?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{children:" Cliente modificado! "}),Object(x.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){k(""),F(!1),a({nomeCliente:""}),O({novoNome:"",novasUsinas:[]})},style:{width:"40%",margin:"0 auto"},children:"Outro?"})]}):""]})]})},H=function(){var e=Object(d.useState)({}),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(d.useState)({porcentagem:20,"pre\xe7oKw":.95}),j=Object(u.a)(r,2),m=j[0],p=j[1],h=function(e){var t=e.target,n=t.name,a=t.value;p(Object(s.a)(Object(s.a)({},m),{},Object(o.a)({},n,Number(a)))),console.log(m)};return Object(d.useEffect)((function(){var e=function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(S);case 2:t=e.sent,a({tamanhoTotalIntervalos:t.intervals_diff.length,mediaIntervalos:t.intervals_avg,mediaKw:t.kw_avg,totalKw:t.kw_total});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(x.jsxs)("main",{children:[Object(x.jsx)("h1",{children:"C\xe1lculo Lucro"}),Object(x.jsxs)(f.a,{id:"input-percentage",children:["Porcentagem a calcular",Object(x.jsx)(O.a,{labelid:"input-percentage",name:"porcentagem",type:"number",onChange:function(e){return h(e)},InputLabelProps:{shrink:!0},inputProps:{inputMode:"numeric",pattern:"[0-9]*",min:"00",max:"100",step:"1",defaultValue:"20"}})]}),Object(x.jsxs)(f.a,{id:"input-kw",children:["Pre\xe7o do KW",Object(x.jsx)(O.a,{labelid:"input-kw",name:"pre\xe7oKw",type:"number",onChange:function(e){return h(e)},InputLabelProps:{shrink:!0},inputProps:{inputMode:"numeric",pattern:"[0-9]*",min:"00",max:"100",step:"0.01",defaultValue:"0.95"}})]}),Object(x.jsx)("div",{style:{margin:"1em auto"},children:n.hasOwnProperty("totalKw")?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("p",{children:["H\xe1 um total de ",n.tamanhoTotalIntervalos," amostrages;"]}),Object(x.jsxs)("p",{children:["Com a m\xe9dia dos intervalos sendo ",parseInt(60*n.mediaIntervalos,10)," minutos;"]}),Object(x.jsxs)("p",{children:["A empresa gera um total de ",n.totalKw.toFixed(2)," KW diariamente;"]}),Object(x.jsxs)("p",{children:["Isto \xe9, ",(n.mediaIntervalos*n.totalKw).toFixed(2)," KWh por dia;"]}),Object(x.jsxs)("p",{children:["Portanto o lucro di\xe1rio \xe9 R$",(m.porcentagem/100*(n.mediaIntervalos*n.totalKw*m.pre\u00e7oKw)).toFixed(2)]})]}):Object(x.jsx)(l.a,{})})]})},q=n(18);t.default=function(){return Object(x.jsxs)(a.c,{children:[Object(x.jsx)(a.a,{exact:!0,path:q.d,component:_}),Object(x.jsx)(a.a,{path:q.c,component:B}),Object(x.jsx)(a.a,{path:q.f,component:H}),Object(x.jsx)(a.a,{path:q.a,component:N}),Object(x.jsx)(a.a,{path:q.b,component:U}),Object(x.jsx)(a.a,{path:q.e,component:J})]})}}}]);
//# sourceMappingURL=4.cbcdc0d4.chunk.js.map